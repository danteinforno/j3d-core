<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta content="text/html; charset=ISO-8859-1"
 http-equiv="content-type">
  <title>Java 3D 1.4: Stencil Buffer</title>
</head>
<body>
<h2>Java&nbsp;3D<sup><font size="-2">TM</font></sup> 1.4:
Stencil Buffer</h2>
<p><span style="color: rgb(204, 0, 0);"><i>NOTE: THIS DOES NOT INCLUDE
ANY MULTIPASS SUPPORT&nbsp;</i></span>
</p>
<p>This page describes the proposed API changes for stencil buffer
support in Java&nbsp;3D
1.4. The GraphicsConfigTemplate3D class is used to find a
GraphicsConfiguration object with the desired attributes. These
attributes include number of color bits (red, green, and blue size),
depth buffer size, and whether or not double-buffering, stereo, or
antialiasing is needed. The GraphicsConfiguration is used in turn used
to create a Canvas3D into which Java&nbsp;3D can render.<br>
</p>
<p>We propose to add a
new stencilSize attribute to GraphicsConfigTemplate3D that will allow
an application to create a Canvas3D (on-screen or off-screen) with a
stencil buffer. We also propose to add new attributes to the
RenderingAttributes object that will allow an application to control
the stencil test and update. These will work in a similar manner to the
equivalent OpenGL methods. Note that since multipass support is not yet
available, applications wishing to use stencil will need to make use of
OrderedGroup (or use mixed-mode / immediate-mode rendering).<br>
</p>
<p>See the new javadoc for more information: <a
 href="http://javadesktop.org/java3d/javadoc/1.4.0-latest/javax/media/j3d/GraphicsConfigTemplate3D.html#setStencilSize%28int%29">GraphicsConfigTemplate3D.setStencilSize</a>,
<a
 href="http://javadesktop.org/java3d/javadoc/1.4.0-latest/javax/media/j3d/RenderingAttributes.html">RenderingAttributes</a>.
</p>
<p>The proposed API changes are:<br>
</p>
<ul>
  <li>New fields and set methods in existing classes (will also add get
methods):<br>
  </li>
  <ul>
    <pre>GraphicsConfigTemplate3D<br>    method: setStencilSize(int) // default=0<br><br>RenderingAttributes<br>    fields: ALLOW_STENCIL_ATTRIBUTES_READ/WRITE<br>    fields: STENCIL_KEEP, STENCIL_ZERO, STENCIL_REPLACE,<br>    fields: STENCIL_INCR, STENCIL_DECR, STENCIL_INVERT<br>    method: setStencilEnable(boolean enable)<br>    method: setStencilOp(int fail, int zfail, int zpass)<br>    method: setStencilFunction(int func, int ref, int mask)<br>    method: setStencilWriteMask(int mask)<br></pre>
  </ul>
</ul>
<p>Issues:<br>
</p>
<ol>
  <li>How/when is the stencil buffer cleared? Implicitly at the start
of a frame? Explicitly? The latter seems problematic.<br>
    <span style="font-style: italic;">[Current plan is to clear
implicitly
at the start of each frame and not provide explicit control]</span><br>
  </li>
  <li>Does the OpenGL stencil functionality map cleanly to DirectX? If
not, then stencil support may not be available for the D3D version of
Java&nbsp;3D.<br>
  </li>
</ol>
<p><font color="gray">Page last updated &#8212;
$Date$
</font></p>
</body>
</html>
